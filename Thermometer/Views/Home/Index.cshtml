@{
  ViewData["Title"] = "Home Page";
}

<br/>


<form id="send-form" action="#">
   
  <input type="text" id="message-textbox"  hidden/> 
  <button id="send-button" type="submit" >Refresh</button>
</form>

@*<ul id="messages-list">
  
 
</ul>*@

<h4 id="temperature"></h4>

@section Scripts {
  <script src="/lib/signalr/signalr.js"></script>
  <script type="text/javascript">
    // Bind DOM elements
    var sendForm = document.getElementById("send-form");
    var sendButton = document.getElementById("send-button");
    var messagesList = document.getElementById("messages-list");
    var messageTextBox = document.getElementById("message-textbox");

    function appendMessage(content) {
      //var li = document.createElement("li");
      //li.innerText = content;
      //messagesList.appendChild(li);

      var temp = document.getElementById("temperature");
      temp.innerText = content;
    }

    var connection = new signalR.HubConnection("/hubs/update");

    sendForm.addEventListener("submit", function() {
      var message = messageTextBox.value;
      messageTextBox.value = "";
      connection.send("Send", message);
    });

    connection.on("SendMessage", function (sender, message) {
      appendMessage(message);
    });

    //connection.on("SendAction", function (sender, action) {
    //  appendMessage(sender + ' ' + action);
    //});

    connection.start().then(function() {
      messageTextBox.disabled = false;
      sendButton.disabled = false;
    });
    var timer = setInterval(connection.send("Send", ""), 1000).start;
  </script>
}